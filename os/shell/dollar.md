## shell编程之--$

> 学过php的都知道$符号是变量符号，把$符号加上字符串，那么这个字符串就是一个变量名或者对象名。  
而在shell中$符号有很多的特殊用法。

### shell中$的特殊用法

- `$$`: shell本身的PID(Process ID)进程ID
- `$!`: shell最后运行的后台进程PID
- `$?`: 最后运行的命令的结束代码(exit 0/1/2),0是正常，其它是错误
- `$-`: 使用set命令设定的Flag一览

- 参数相关
    - `$0`: shell脚本本身的文件名
    - `$1~$n`: 添加到shell的各参数，$1是第1个参数,$2是第2个参数...
    - `$#`: 添加到shell的参数个数
    - `$*`: 所有参数列表：eg：`"$*"`: 以`"$1 $2 ...$n"`的形式输出所有参数
    - `$@`: 所有参数列表：eg: `"$@"`: 以`"$1" "$2" ... "$n"`的形式输出所有参数


**示例:**

```shell
#! /bin/sh
echo "当前脚本是：$0"
echo "脚本传入参数的个数是：$#"
echo "参数分别是：$*"
echo "$@"

echo "第1个参数是：$1"
echo "当前进程是：$$"

echo '展示$*和$@的差异'
echo '==== $* ====='

for i in "$*"
do
    echo $i
done

echo "==== \$@ ====="

for i in "$@"
do
    echo $i
done
echo "测试\$*和\$@差异结束"
```

**执行程序：**

```
➜  shell ./demo01.sh abc ddd ok good shell
当前脚本是：./demo01.sh
脚本传入参数的个数是：5
参数分别是：abc ddd ok good shell
abc ddd ok good shell
第1个参数是：abc
当前进程是：88315
展示$*和$@的差异
==== $* =====
abc ddd ok good shell
==== $@ =====
abc
ddd
ok
good
shell
测试$*和$@差异结束
```


### ${}、${}、$()、$(())的区别
- `${}`：用来做变量替换
    > 一般来说$var与${var}并没什么区别，但是${}可以精确的界定边界，比如：  
	定义x=123,我们输出echo $xy就会输出空，用echo ${x}y，输出的就是"123y"了。  
	同时注意：如果在单引号中，这个会无效的，而在双引号中，有效。

- `$()`:这个与两个反引号相同功能，都是为了用来做命令替换用的
	> 所谓的命令替换，就是把这包裹起来的命令，先执行后，把结果替换给它。

```
➜  shell echo 文件列表：`ls`
文件列表：case.sh case2.sh demo01.sh
➜  shell echo 当前日期：`date`
当前日期：2015年 1月15日 星期四 11时27分13秒 CST
➜  shell echo 当前日期: $(date)
当前日期：2015年 1月15日 星期四 11时27分19秒 CST
➜  shell echo 当前日期: 'date$$'
当前日期: date$$
```
**注意：**是反引号而不是单引号哦！单引号中的命令会原样输出。

- `$(())`: 在这双括号中的变量名称，可以在其前面加`$`符号来替换，也可以不用. 单独用`(( ))`可以重定义变量，或者做testing.

```
➜  shell a=6;b=5;c=9
➜  shell echo $(a+b+c)
➜  shell echo $((a+b+c))
20
➜  shell ((a++))
➜  shell echo $(($a + $b + $c))
21
```